
Każdy plik DICOM posiada \quotett{Data Set}, czyli zbiór informacji składający się z \quotett{Data Element}.
\quotett{Data Element} jest strukturą przechowującą wszystkie dane dotyczące obrazu.

\paragraph{Konwerter}

Obiekt klasy \sokarclass{DataConverter} to obiekt zajmujący się konwersją danych z pliku DICOM na dane w formacie odpowiadającej przeglądarce.

Kilka rzeczy które się tyczą wszystkich danych i konwersji:
\begin{itemize}
    \item większość VR jest to zapisane jako tekst, kodowanie i dekodowanie tekstu jest zapewniane przez bibliotekę, a konkretniej przez klasę \gdcmclass{StringFilter}, dlatego nie przejmuje się takimi rzeczami jak zapisem LittleEndian i BigEndian.
    \item większość danych może mieć kilka wartości oddzielonych backslashem \quotett{\textbackslash}, dlatego konwerter dla VR w, których standard przewiduje wiele wartości, zawsze zwraca \qtclass{QVector} z tymi wartościami
    \item wszystkie dane są zapisane parzystą ilością bajtów, w przypadku tekstu dodaje się znak spacji na końcu danych, taka spacja jest pomijana w analizie danych
\end{itemize}

Klasa obsługuje następujące VR:
\begin{itemize}
    \item AS - Age String - wiek lub długość życia

    Długość danych zawsze wynosi 4 bajty.
    Pierwsze trzy bajty to liczba całkowita zapisana za pomocą tekstu.
    Czwarty bajt to znaku określający jednostkę czasu.
    Standard definiuje cztery możliwe jednostki czasu: \quotett{D} jako dzień, \quotett{W} jako tydzień, \quotett{M} jako miesiąc, oraz \quotett{Y} jako jeden rok.
    Konwerter zmienia tą wartość na tekst w postaci czytelnej, np: \quotett{18 weeks} lub \quotett{3 years}, oraz jest wrażliwy na obecny język aplikacji.
    
    Przykład: \quotett{018M} oznacza 18 miesięcy, \quotett{123D} oznacza 123 dni.

    \item AT - Attribute Tag - inny tag

    Długość danych to zawsze 32 bity, są to dwie 16 bitowe liczby.
    Odpowiednio grupa i element grupy.
    Ten VR jest używany kiedy wskazujemy na inny tag.
    Wartość nie jest nigdy pokazywana użytkownikowi, a jedynie używana w interpretacji przez algotyrm tworzenia filmu.
    
    Przykład: tag \dicomtag{FrameIncrementPointer}{0028}{0009} jest używany kiedy w pliku jest zapisana sekwencja kilku obrazów, wskazuje on na inny tag zawierający informacje w jaki sposób ta sekwencja ma być wyświetlona.
    
    \item DA - Date - data lub dzień

    Długość danych zawsze wynosi 8 bajtów.
    Data zapisana w formacie \quotett{YYYYMMDD}, gdzie: \quotett{YYYY} cztery cyfry roku, \quotett{MM} dwie cyfry miesiąca, \quotett{DD} dwie cyfry dnia w kalendarzu Gregoriańskim.
    Konwerter zamienia dane na obiekt klasy \qtclass{QDate}, który ma w sobie wbudowaną konwersję na tekst zależny od ustawień językowych aplikacji.
    
    Przykład: \quotett{19800716} oznacza 16 lipca 1980
    
    UWAGA: Standard \quotett{ACR-NEMA Standard 300}, czyli poprzednik DICOM definiował date w sposób \quotett{YYYY.MM.DD}, według standardu DICOM, taki zapis jest nie poprawny, ale zdarzają się stare obrazy z takimi datami i \sokarclass{DataConverter} obsługuje taki format.

    \item DS - Decimal String - liczba zmienno przecinkowa lub ciąg kilku liczb zmienno przecinkowych zapisanych za pomocą tekstu w notacji wykładniczej

    Długość jednej liczby powinna maksymalne wynosić 16 bajtów.
    Dostępne znaki to \quotett{0}-\quotett{9}, \quotett{+}, \quotett{-}, \quotett{E}, \quotett{e}, \quotett{.}.
    Biblioteka QT posiada wbudowany konwerter liczb zapisanych w formacie wykładniczym, dlatego mój konwerter dzieli tekst i konwertuje za pomocą QT.
    
    Przykład: \quotett{426\textbackslash468 } oznacza dwie liczby 426 i 468. Proszę zwrócić uwagę na spacje na końcu.

    \item IS - Integer String - liczba całkowita 

    Długość jednej liczby powinna maksymalne wynosić 12 bajtów.
    Dostępne znaki to \quotett{0}-\quotett{9}, \quotett{+}, \quotett{-}.
    Biblioteka QT posiada wbudowany konwerter liczb całkowitych, dlatego mój konwerter używa konwertera z QT.
    
    Przykład: \quotett{426 }  oznacza liczbę 426.

    \item PN - Person Name - nazwa osoby

    Jako, że pacjenta, bądź obiekt badany można nazwać w sposób dowolny i odbiegający od polskiego standardu nazewnictwa, standard DICOM nie przewiduje rozdzielenie poszczególnych składowych nazwy na oznaczone fragmenty.
    \quotett{Person Name} dzieli nazwę na podane fragmenty, rozdzielony znakiem \quotett{\^{}} (94 znak kodu ASCII):
    \begin{itemize}
        \item family name complex - nazwisko, np. Smolik
        \item given name complex - imię, np. Adam
        \item middle name - środkowe imię, brak odpowiednika w polskim nazewnictwie
        \item name prefix - prefiks przed imieniem, np: mgr. inż.
        \item name suffix - sufiks po imieniu, brak odpowiednika
    \end{itemize}
    Długość jednego fragmenty powinna maksymalne wynosić 64 znaki.
    W przypadku mniejszej ilości segmentów, mamy założyć, że są puste.
    
    Przykład: \quotett{prof. dr. hab. inż. Waldemar Smolik pracownik ZEJIM} był by zapisany w sposób następujący: \quotett{Smolik\^{}Waldemar\^{}\^{}prof. dr. hab. inż.\^{}pracownik ZEJIM}

    \item SS - Signed Short - 16 bitowa liczba całkowita bez znaku
    
    Jako, że biblioteka GDCM zajmuje się konwersją Little i Big Endian, mogę dane zinterpretować jako typ \quotett{quint16}

    \item US - Unsigned Short - 16 bitowa liczba całkowita ze znakiem

    Jako, że biblioteka GDCM zajmuje się konwersją Little i Big Endian, mogę dane zinterpretować jako typ \quotett{qint16}
    
    \item UT - Unlimited Text - tekst o nieograniczonej długości.

    Zwykły tekst o długości maksymalnie 2\textsuperscript{32}-2 bajtów.
\end{itemize}